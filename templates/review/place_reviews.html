{% load util %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Reviews</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>
<body>

<div class="main_wrapper" style="display: flex; align-items: center;justify-content: center; flex-direction: column; flex-wrap: wrap;">

    <div class="flex-container" style="border: 1px solid rgba(0, 0, 0, 0.2); min-width: 400px; border-radius: 5px; margin-top: 10px; text-align: center;">
        <h1>Place Reviews</h1>
    </div>

    <div class="card" style="max-width: 400px; margin-top: 10px;">

        <img src="{{place.photo}}" class="card-img-top" alt="photo" style="max-height: 280px; max-width: 400px">

        <div class="card-body">
            <h5 class="card-title">{{place.name}}</h5>
            <p class="card-text">{{place.location}}</p>
            <p class="card-text">{{place.description}}</p>
            <p class="card-text">
                Rating: {{ rating }}
                {% if rating|get_type == 'float' %}
                    /5
                {% endif %}
            </p>

            <div style="display: flex; justify-content: space-between;">
                <a href="{% url 'write_review' place.id %}" class="btn btn-primary">Write Review</a>
                <a href="{% url 'index' %}" class="btn btn-primary">All Places</a>
            </div>

        </div> {# card-body  #}

    </div>  {# card #}

    <div class="flex-container" style="border: 1px solid rgba(0, 0, 0, 0.2); margin:10px 0 10px 0; width: 25rem; padding: 10px; border-radius: 5px;">
            <div>
                <form method="GET" action="{% url 'reviews' place.id %}">
                    {{ form.as_p}}
                    <button type="submit" class="btn btn-secondary">Filter</button>
                </form>
            </div>
    </div>

    <div class="flex-container" style="border: 1px solid rgba(0, 0, 0, 0.2); margin:10px 0 10px 0; width: 25rem; padding: 10px; border-radius: 5px;">

        <div style="text-align: center; display: flex; justify-content: space-between;">

            <h2 style="margin-bottom: 30px;">Reviews:</h2>

        </div>

        {% for review in reviews %}

        <div style="background-color: cadetblue; margin-bottom: 0; padding: 10px; border-radius: 5px 5px 0 0; display: flex; justify-content: space-between;">

            <div style="width: 200px; height: 30px;">
                <h3 style="font-size: 1.4rem;">{{ review.username }}</h3>
            </div>

            <div style="max-width: 200px; height: 30px;">
                <p style="line-height: 30px;">{{review.get_formatted_time}}</p>
            </div>

        </div>

        <div style="border: 1px solid rgba(0, 0, 0, 0.2); margin-bottom: 10px; border-radius: 0 0 5px 5px; padding: 10px;">
            <p>{{review.stars}}/5</p>
            <p>{{ review.comment  }}</p>
        </div>

        {% endfor %}

    </div>

</div> {# main wrapper #}
</body>
</html>